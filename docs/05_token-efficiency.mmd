%% Token Efficiency Comparison
%% Markdown vs YAML vs AICF 2.0

graph TB
    Title[üìä Token Efficiency Comparison<br/>Same conversation entry in 3 formats]

    Title --> Format1[Format 1: Markdown Prose]
    Title --> Format2[Format 2: YAML]
    Title --> Format3[Format 3: AICF 2.0]

    Format1 --> MD[<b>Markdown Example:</b><br/>## Chat #7 - v0.10.0: Automatic chat-finish<br/><br/>### What We Did<br/>- Released v0.10.0 with automatic chat-finish<br/>- Rewrote src/chat-finish.js 274 lines<br/><br/>### Key Decisions<br/>- Make chat-finish 100% automatic<br/>- Rationale: Users don't want questions<br/>  after 4-hour sessions<br/><br/>### Outcome<br/>Shipped successfully]

    MD --> MDTokens[üí∞ Tokens: 150<br/>üìè Characters: 450<br/>üë§ Human-readable: ‚úÖ‚úÖ‚úÖ<br/>ü§ñ AI-parseable: ‚ö†Ô∏è Slow]

    Format2 --> YAML[<b>YAML Example:</b><br/>---<br/>CHAT: 7<br/>DATE: 2025-10-01<br/>TYPE: RELEASE<br/>TOPIC: v0.10.0: Automatic chat-finish<br/>WHAT:<br/>  - Rewrote chat-finish for automatic operation<br/>WHY:<br/>  - Users don't want questions after 4hr sessions<br/>OUTCOME: SHIPPED<br/>FILES: src/chat-finish.js<br/>---]

    YAML --> YAMLTokens[üí∞ Tokens: 80<br/>üìè Characters: 240<br/>üë§ Human-readable: ‚úÖ‚úÖ<br/>ü§ñ AI-parseable: ‚úÖ Fast]

    Format3 --> AICF[<b>AICF 2.0 Example:</b><br/>Pipe-delimited format:<br/>7 20251001 R v0.10.0 auto chat-finish<br/>Rewrote chat-finish auto operation<br/>Users no questions after 4hr sessions<br/>S src/chat-finish.js]

    AICF --> AICFTokens[üí∞ Tokens: 12<br/>üìè Characters: 120<br/>üë§ Human-readable: ‚ö†Ô∏è Compact<br/>ü§ñ AI-parseable: ‚úÖ‚úÖ‚úÖ Instant]

    MDTokens --> Compare[Comparison]
    YAMLTokens --> Compare
    AICFTokens --> Compare

    Compare --> Savings[Token Savings:<br/>YAML vs Markdown: 47% reduction<br/>AICF vs YAML: 85% reduction<br/>AICF vs Markdown: 92% reduction]

    Savings --> Scale[At Scale: 100 entries]

    Scale --> Scale1[Markdown: 15,000 tokens<br/>YAML: 8,000 tokens<br/>AICF: 1,200 tokens]

    Scale1 --> Context[Context Window Capacity]

    Context --> Claude[<b>Claude Sonnet 4.5 - 200K:</b><br/>Markdown: 1,333 entries<br/>YAML: 2,500 entries<br/>AICF: 16,600 entries<br/>Result: 6.6x more history]

    Context --> Opus[<b>Claude Opus 4 - 200K:</b><br/>Markdown: 1,333 entries<br/>YAML: 2,500 entries<br/>AICF: 16,600 entries<br/>Result: 6.6x more history]

    Context --> O1[<b>OpenAI o1 - 128K:</b><br/>Markdown: 853 entries<br/>YAML: 1,600 entries<br/>AICF: 10,600 entries<br/>Result: 6.6x more history]

    Claude --> Winner[AICF 2.0 Results:<br/>‚úÖ 88% token reduction<br/>‚úÖ 6.6x more history<br/>‚úÖ Instant AI parsing<br/>‚úÖ O1 lookup via index<br/>‚úÖ Relationship tracking]
    Opus --> Winner
    O1 --> Winner

    Winner --> RealWorld[Real-World Impact:<br/>Chat #1: 50 entries = 600 tokens<br/>Chat #2: 100 entries = 1,200 tokens<br/>Chat #3: 200 entries = 2,400 tokens<br/>Chat #10: 500 entries = 6,000 tokens<br/><br/>Still fits in context window]

    style Title fill:#e1f5ff,stroke:#0288d1,stroke-width:3px,font-size:18px
    style Format1 fill:#ffebee,stroke:#c62828,stroke-width:2px
    style Format2 fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
    style Format3 fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px

    style MD fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    style YAML fill:#ffe0b2,stroke:#ef6c00,stroke-width:2px
    style AICF fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px

    style MDTokens fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    style YAMLTokens fill:#ffe0b2,stroke:#ef6c00,stroke-width:2px
    style AICFTokens fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px

    style Compare fill:#e1f5ff,stroke:#0288d1,stroke-width:2px
    style Savings fill:#fff9c4,stroke:#fbc02d,stroke-width:3px
    style Scale fill:#e1f5ff,stroke:#0288d1,stroke-width:2px
    style Scale1 fill:#fff4e6,stroke:#ff9800,stroke-width:2px
    style Context fill:#f3e5f5,stroke:#9c27b0,stroke-width:3px

    style Claude fill:#e1bee7,stroke:#8e24aa,stroke-width:2px
    style Opus fill:#e1bee7,stroke:#8e24aa,stroke-width:2px
    style O1 fill:#e1bee7,stroke:#8e24aa,stroke-width:2px

    style Winner fill:#c8e6c9,stroke:#2e7d32,stroke-width:4px,font-size:16px
    style RealWorld fill:#e6ffe6,stroke:#4caf50,stroke-width:3px
